<!DOCTYPE html>
<html>
  <head>
    <title>–¢–µ—Å—Ç Airtable API</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .result {
        background: #f5f5f5;
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
      }
      .error {
        background: #ffebee;
        color: #c62828;
      }
      .success {
        background: #e8f5e8;
        color: #2e7d32;
      }
      button {
        padding: 10px 20px;
        margin: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>üîç –¢–µ—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Airtable</h1>

    <button onclick="testCarsTable()">–¢–µ—Å—Ç —Ç–∞–±–ª–∏—Ü—ã "–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (Cars)"</button>
    <button onclick="testOrdersTable()">–¢–µ—Å—Ç —Ç–∞–±–ª–∏—Ü—ã "–ó–∞—è–≤–∫–∏ –Ω–∞ –∞—Ä–µ–Ω–¥—É"</button>
    <button onclick="testContactTable()">–¢–µ—Å—Ç —Ç–∞–±–ª–∏—Ü—ã "–ó–∞—è–≤–∫–∏ –Ω–∞ —Å–≤—è–∑—å"</button>

    <div id="results"></div>

    <script>
      const AIRTABLE_BASE_ID = "app2d5VGYA0UjVj9u";
      const AIRTABLE_TOKEN =
        "patMiGkMfV2eHj8Bz.93dd90b012b1ce19e00368c03986794b45064f1d7d16bd91a99f38c4889aee8c";

      function addResult(message, isError = false) {
        const div = document.createElement("div");
        div.className = `result ${isError ? "error" : "success"}`;
        div.innerHTML = message;
        document.getElementById("results").appendChild(div);
      }

      async function testTable(tableName) {
        try {
          const response = await fetch(
            `https://api.airtable.com/v0/${AIRTABLE_BASE_ID}/${encodeURIComponent(
              tableName
            )}?maxRecords=1`,
            {
              headers: {
                Authorization: `Bearer ${AIRTABLE_TOKEN}`,
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const data = await response.json();
          addResult(
            `‚úÖ ${tableName}: –£—Å–ø–µ—à–Ω–æ! –ù–∞–π–¥–µ–Ω–æ ${data.records.length} –∑–∞–ø–∏—Å–µ–π`
          );

          if (data.records.length > 0) {
            const fields = Object.keys(data.records[0].fields);
            addResult(`üìã –ü–æ–ª—è: ${fields.join(", ")}`);
          }

          return data;
        } catch (error) {
          addResult(`‚ùå ${tableName}: –û—à–∏–±–∫–∞ - ${error.message}`, true);
        }
      }

      function testCarsTable() {
        addResult('üîÑ –¢–µ—Å—Ç–∏—Ä—É—é —Ç–∞–±–ª–∏—Ü—É "–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (Cars)"...');
        testTable("–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (Cars)");
      }

      function testOrdersTable() {
        addResult('üîÑ –¢–µ—Å—Ç–∏—Ä—É—é —Ç–∞–±–ª–∏—Ü—É "–ó–∞—è–≤–∫–∏ –Ω–∞ –∞—Ä–µ–Ω–¥—É"...');
        testTable("–ó–∞—è–≤–∫–∏ –Ω–∞ –∞—Ä–µ–Ω–¥—É");
      }

      function testContactTable() {
        addResult('üîÑ –¢–µ—Å—Ç–∏—Ä—É—é —Ç–∞–±–ª–∏—Ü—É "–ó–∞—è–≤–∫–∏ –Ω–∞ —Å–≤—è–∑—å"...');
        testTable("–ó–∞—è–≤–∫–∏ –Ω–∞ —Å–≤—è–∑—å");
      }
    </script>
  </body>
</html>
